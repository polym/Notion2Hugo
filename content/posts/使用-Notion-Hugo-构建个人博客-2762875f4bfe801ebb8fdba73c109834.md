---
title: "使用 Notion-Hugo 构建个人博客"
date: "2025-09-22T14:21:00.000Z"
lastmod: "2025-10-08T02:33:00.000Z"
draft: false
featuredImage: "https://aha.qingy.ing/api?page_id=2762875f-4bfe-801e-bb8f-dba73c109834"
series: []
authors:
  - "Hongbo Mo"
tags:
  - "Hugo"
  - "Notion"
categories:
  - "技术"
NOTION_METADATA:
  object: "page"
  id: "2762875f-4bfe-801e-bb8f-dba73c109834"
  created_time: "2025-09-22T14:21:00.000Z"
  last_edited_time: "2025-10-08T02:33:00.000Z"
  created_by:
    object: "user"
    id: "1b106df3-cc7b-493e-9afa-a6a7c977ec1b"
  last_edited_by:
    object: "user"
    id: "1b106df3-cc7b-493e-9afa-a6a7c977ec1b"
  cover:
    type: "file"
    file:
      url: "https://prod-files-secure.s3.us-west-2.amazonaws.com/dc681554-1505-4cec-9\
        a8f-844b66d5dcc8/4e9385da-92e0-4c4a-9ba1-871eb116b2e5/DSCF9506_preview.\
        jpeg?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAY\
        LOAD&X-Amz-Credential=ASIAZI2LB466WSAK2XLR%2F20251009%2Fus-west-2%2Fs3%\
        2Faws4_request&X-Amz-Date=20251009T012659Z&X-Amz-Expires=3600&X-Amz-Sec\
        urity-Token=IQoJb3JpZ2luX2VjEDAaCXVzLXdlc3QtMiJGMEQCIDAfW3rfjHeZW7B%2FK\
        AxES1UuIT4EDNj8tgns2O5SjKtTAiAAwEgY%2FrBFEevruE45m4XhmfPdeLhzKhMN%2BzXV\
        UFKeDiqIBAjJ%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F8BEAAaDDYzNzQyMzE4MzgwNSIMeSt\
        MvnOWFg43ZdbeKtwDRiJkRweB1pbsilS8TOAvGOmOTrr9sBqLUGjXZqZUPb2O4RuDpa4yYf\
        C83hvtUKOFcU6GmSXBWTOWQZYzD0TtNuN8pNQIrPEA1WnRTJSeDmAMui1UW70FvW%2B%2Fv\
        4pb0lUi6F41DpdsAPIKk%2BxDb4MpHeTmHWbALQJG3eW4LehxhIo49yHeD7nXzayeTtexou\
        8AOemYESjq%2BABqV2WUzdcL%2FuEaQvy5UG8aMVOLlrGQDgRmYwaRhxtdDYSKovvHDtipM\
        mxvzdcYXGgSFZbwolEFjXuBHeetocEy42SB5nZ5PQwgpZwxox48xmsDbBYuy%2FPQd5klTk\
        vvkV%2FlCFs11gBFrn%2BS5i74ZmD3Bh6T9hSZqZXpdZ59mSOCG5fMg%2FDW1XJAP4Raytx\
        UU1LovIt%2F8gygUnWJXsdah%2BxjoJyNA%2Bumz%2B8GqBHWsQ90pNsmA54%2F6Z%2Bm6K\
        Nlm8Pw9JmzCWyTeSgSHZP5k7uFHV5seCWmkRoUBrenoWQCKkpJ%2BVE3fPunX4455UttteG\
        cwPLOHtmtnQh8hV6t14pbo9w4MkksaOc%2Fj%2FfgPW7WkX2%2FLg0gZ9HoVP7VIoo6Xf%2\
        Bsd4WEUmDXCOdxp5AR2L1ibesjbur3e8NITyNEWK74UTIhEd1UO9Ew9vmbxwY6pgH97c5K0\
        KsiSTVWzWeNmQtGUOlF1pA7mjd%2BbZpmBp4l7Xy56iCExJy7tq7SvxL%2BJlIEFSVZumdH\
        G49HY3By5EfgLfBZyXi%2FvecE196dOXcObPzePulVaM1K7iJQNUSbfTJWJfF97subpEuy%\
        2FarZi6d%2Fo3O3YWUxgsuNr81NceLgPl6AcctMARl9E8HIcoELp4z8%2Bkj0N%2FUFWqWY\
        yklr6hV1y6uOui1o&X-Amz-Signature=d01a4a185cc62ae37d6d8331e92c07d1c9e2e6\
        a77ae7a22219181c493ff6f4a3&X-Amz-SignedHeaders=host&x-amz-checksum-mode\
        =ENABLED&x-id=GetObject"
      expiry_time: "2025-10-09T02:26:59.919Z"
  icon: null
  parent:
    type: "database_id"
    database_id: "2742875f-4bfe-8102-8a94-f918ade28f0e"
  archived: false
  in_trash: false
  is_locked: false
  properties:
    series:
      id: "B%3C%3FS"
      type: "multi_select"
      multi_select: []
    draft:
      id: "JiWU"
      type: "checkbox"
      checkbox: false
    authors:
      id: "bK%3B%5B"
      type: "people"
      people:
        - object: "user"
          id: "1b106df3-cc7b-493e-9afa-a6a7c977ec1b"
          name: "Hongbo Mo"
          avatar_url: "https://lh3.googleusercontent.com/-TqDAswHjpLU/AAAAAAAAAAI/AAAAAAA\
            ACcE/ytljzmTe0FE/photo.jpg"
          type: "person"
          person:
            email: "zjutpolym@gmail.com"
    custom-front-matter:
      id: "c~kA"
      type: "rich_text"
      rich_text: []
    tags:
      id: "jw%7CC"
      type: "multi_select"
      multi_select:
        - id: "453d0ea5-9234-46ef-8753-c178fdb47cac"
          name: "Hugo"
          color: "red"
        - id: "43d5116b-46a8-405e-8409-cede6a951e08"
          name: "Notion"
          color: "gray"
    categories:
      id: "nbY%3F"
      type: "multi_select"
      multi_select:
        - id: "3e64a788-1d3d-460d-ad3a-18dc5cbc48e5"
          name: "技术"
          color: "brown"
    Last edited time:
      id: "vbGE"
      type: "last_edited_time"
      last_edited_time: "2025-10-08T02:33:00.000Z"
    summary:
      id: "x%3AlD"
      type: "rich_text"
      rich_text: []
    Name:
      id: "title"
      type: "title"
      title:
        - type: "text"
          text:
            content: "使用 Notion-Hugo 构建个人博客"
            link: null
          annotations:
            bold: false
            italic: false
            strikethrough: false
            underline: false
            code: false
            color: "default"
          plain_text: "使用 Notion-Hugo 构建个人博客"
          href: null
  url: "https://www.notion.so/Notion-Hugo-2762875f4bfe801ebb8fdba73c109834"
  public_url: "https://polym.notion.site/Notion-Hugo-2762875f4bfe801ebb8fdba73c109834"
MANAGED_BY_NOTION_HUGO: true

---


## 1. 为什么？


> 为什么会想要构建个人博客并且还是通过 Notion 的方式？


「零秒思考」后的结果：

1. Notion 中毒用户，馋 Notion 的编辑器
1. 对 Notion 中记录的内容做一个系统整理并输出，尽量使用图的形式来展示
1. 记录个人的思考、成长以及展示自己的能力，以便后续回顾
1. 希望每篇博客都有自己的拍摄的一张照片，记录生活的点滴

> 为什么选择 Hugo？


对 Hugo 这个项目接触比较早，大部分代码使用 Golang 实现，后续可操作性更强。


## 2. 架构图


虽然「元否」和 Notion-Hugo 的作者都给出了比较详细的说明，但是在实际配置过程中，还需要熟悉 Github action、Cloudflare builder 等概念，以便理解何时触发网站构建以及发布。梳理了一个架构图以便快速理解原理，为后续优化提供思路。


![](https://aha.qingy.ing/api?block_id=2762875f-4bfe-8008-96a6-face7aa4f515)


## 3. 遇到的问题


[https://github.com/HEIGE-PCloud/Notion-Hugo](https://github.com/HEIGE-PCloud/Notion-Hugo) 在将 Notion 的 page 转换成 markdown 格式时，如果遇到图片，会将原始 URL 的方式写入到 markdown 文件中，而这个 URL 是有防盗链的，1 小时后便会过期，导致图裂。


```bash
https://prod-files-secure.s3.us-west-2.amazonaws.com/dc681554-1505-4cec-9a8f-844b66d5dcc8/4e9385da-92e0-4c4a-9ba1-871eb116b2e5/DSCF9506_preview.jpeg?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB466SETVVHQ7%2F20250927%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20250927T010113Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEBEaCXVzLXdlc3QtMiJHMEUCIBgl6TamR&X-Amz-Signature=d9be103faf2f37cf40ca1481c3dd906b8aa9e47d57bf05b8195d9929f53eebcc&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject
```


考虑到 Notion-Hugo 的转换脚本是通过 nodejs 来实现的，对我来说二开的难度较大，另外整体逻辑也不复杂，最终决定自己来重新搭建一套。在 Github 中找到了多个使用 python 来实现 notion2md 的库，经过对比和少量的 hack，完成了第一版转换脚本：[https://github.com/polym/notion2md](https://github.com/polym/notion2md)


## 4. 其他核心点


以下是 Github Action workflow


```makefile
name: Build and Deploy Blog

on:
  # 每天凌晨 1 点自动触发
  schedule:
    - cron: '0 17 * * *' # 北京时间 01:00
  # 允许手动触发
  workflow_dispatch:

jobs:
  build-deploy:
    runs-on: ubuntu-latest
    permissions:
      contents: write
    steps:
      - name: Checkout code
        uses: actions/checkout@v3
      
      # Hugo 主题库拉取
      - name: Update git submodules
        run: |
          git submodule update --init --recursive

      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.x'

      - name: Install dependencies
        run: |
          sudo apt-get update
          sudo apt-get install -y make
          pip install -r py/requirements.txt

      - name: Install latest Hugo
        run: |
          wget https://github.com/gohugoio/hugo/releases/download/v0.151.0/hugo_0.151.0_linux-amd64.deb -O hugo.deb
          sudo dpkg -i hugo.deb
          hugo version
      
      # 指定 NOTION DB 和 NOTION TOKEN
      - name: Set up environment variables
        run: |
          echo "NOTION_DB_ID=${{ secrets.NOTION_DB_ID }}" > .env
          echo "NOTION_TOKEN=${{ secrets.NOTION_TOKEN }}" >> .env
          echo "NOTION_DB_ID=${{ secrets.NOTION_DB_ID }}" >> $GITHUB_ENV
          echo "NOTION_TOKEN=${{ secrets.NOTION_TOKEN }}" >> $GITHUB_ENV

      - name: Build blog
        run: |
          make convert && make build

      # 自动提交 hugo-site/content 中的内容
      - name: Commit updated content
        uses: stefanzweifel/git-auto-commit-action@v6
        with:
          commit_message: Sync content with Notion
          file_pattern: 'hugo-site/content/'
```


## 5. 后续的思考

- 需要去解决 Notion 中特殊块到 Markdown 的连接
- 对特定 Hugo 主题自定义配置，需要做好适配，初步思路通过 page 的属性字段来实现

## 6. 参考资料

- 
- [https://github.com/HEIGE-PCloud/Notion-Hugo](https://github.com/HEIGE-PCloud/Notion-Hugo)
- 
- 
- [https://github.com/SwordAndTea/notion-to-md-py](https://github.com/SwordAndTea/notion-to-md-py)
